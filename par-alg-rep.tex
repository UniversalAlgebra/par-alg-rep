%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%                         BIBLIOGRAPHY FILE                                 %%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% The `filecontents` command will crete a file in the inputs directory called 
%% refs.bib containing the references in the document, in case this file does 
%% not exist already.
%% If you want to add a BibTeX entry, please don't add it directly to the
%% refs.bib file.  Instead, add it in this file between the
%% \begin{filecontents*}{refs.bib} and \end{filecontents*} lines
%% then delete the existing refs.bib file so it will be automatically generated 
%% again with your new entry the next time you run pdfaltex.
\begin{filecontents*}{inputs/refs.bib}
@article {MR3076179,
    AUTHOR = {Kearnes, Keith A. and Kiss, Emil W.},
     TITLE = {The shape of congruence lattices},
   JOURNAL = {Mem. Amer. Math. Soc.},
  FJOURNAL = {Memoirs of the American Mathematical Society},
    VOLUME = {222},
      YEAR = {2013},
    NUMBER = {1046},
     PAGES = {viii+169},
      ISSN = {0065-9266},
      ISBN = {978-0-8218-8323-5},
   MRCLASS = {08B05 (08B10)},
  MRNUMBER = {3076179},
MRREVIEWER = {James B. Nation},
       DOI = {10.1090/S0065-9266-2012-00667-8},
       URL = {http://dx.doi.org/10.1090/S0065-9266-2012-00667-8},
}
@unpublished{Nation-notes,
author = {J. B. Nation},
title = {Notes on Lattice Theory},
note = {Unpublished notes},
year = {2007, 2016},
URL = {http://www.math.hawaii.edu/~jb/}
}
\end{filecontents*}
\documentclass[11pt]{amsart}
% The following \documentclass options may be useful:
% preprint      Remove this option only once the paper is in final form.
% 10pt          To set in 10-point type instead of 9-point.
% 11pt          To set in 11-point type instead of 9-point.
% numbers       To obtain numeric citation style instead of author/year.

%% \usepackage{setspace}\onehalfspacing

\usepackage{amsmath}
\usepackage{amscd,amssymb,amsthm} %, amsmath are included by default
\usepackage{latexsym,stmaryrd,mathrsfs,enumerate,scalefnt,ifthen}
\usepackage{mathtools}
\usepackage[mathcal]{euscript}
\usepackage[colorlinks=true,urlcolor=black,linkcolor=black,citecolor=black]{hyperref}
\usepackage{url}
\usepackage{scalefnt}
\usepackage{tikz}
\usepackage{color}
\usepackage[margin=1in]{geometry}
\usepackage{scrextend}

%%////////////////////////////////////////////////////////////////////////////////
%% Theorem styles
\numberwithin{equation}{section}
\theoremstyle{plain}
\newtheorem{theorem}{Theorem}[section]
\newtheorem{lemma}[theorem]{Lemma}
\newtheorem{proposition}[theorem]{Proposition}
\newtheorem{prop}[theorem]{Proposition}
\theoremstyle{definition}
\newtheorem{claim}[theorem]{Claim}
\newtheorem{corollary}[theorem]{Corollary}
\newtheorem{definition}[theorem]{Definition}
\newtheorem{notation}[theorem]{Notation}
\newtheorem{Fact}[theorem]{Fact}
\newtheorem*{fact}{Fact}
\newtheorem{example}[theorem]{Example}
\newtheorem{examples}[theorem]{Examples}
\newtheorem{exercise}{Exercise}
\newtheorem*{lem}{Lemma}
\newtheorem*{cor}{Corollary}
\newtheorem*{remark}{Remark}
\newtheorem*{remarks}{Remarks}
\newtheorem*{obs}{Observation}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Acronyms
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% \usepackage[acronym, shortcuts]{glossaries}
%\usepackage[smaller]{acro}
\usepackage[smaller]{acronym}
\usepackage{xspace}

%% \acs{CSP} -- short version of the acronym\\
%% \acl{CSP} -- expanded acronym without mentioning the acronym.\\
%% \acp{CSP} -- plurals.\\
%% \acfp{CSP} -- long forms into plurals.\\
%% \acsp{CSP} -- short form into a plural.\\
%% \aclp{CSP} -- long form into a plural.\\
%% \acfi{CSP} -- Full Name acronym in italics and abbreviated form in upshape.\\
%% \acsu{CSP} -- short form of the acronym and marks it as used.\\
%% \aclu{CSP} -- Prints the long form of the acronym and marks it as used.\\

\acrodef{lics}[LICS]{Logic in Computer Science}
\acrodef{sat}[SAT]{satisfiability}
\acrodef{nae}[NAE]{not-all-equal}
\acrodef{ctb}[CTB]{cube term blocker}
\acrodef{tct}[TCT]{tame congruence theory}
\acrodef{wnu}[WNU]{weak near-unanimity}
\acrodef{CSP}[CSP]{constraint satisfaction problem}
\acrodef{MAS}[MAS]{minimal absorbing subuniverse}
\acrodef{MA}[MA]{minimal absorbing}
\acrodef{cib}[CIB]{commutative idempotent binar}
\acrodef{sd}[SD]{semidistributive}
\acrodef{NP}[NP]{nondeterministic polynomial time}
\acrodef{P}[P]{polynomial time}
\acrodef{PeqNP}[P $ = $ NP]{P is NP}
\acrodef{PneqNP}[P $ \neq $ NP]{P is not NP}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\usepackage{inputs/proof-dashed}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%% Put new macros in the macros.sty file
\usepackage{inputs/macros}

\usepackage[backend=bibtex]{biblatex}
\bibliography{inputs/refs.bib}

\begin{document}

\title[Partial Algebras]{Every Finite lattice is the congruence lattice\\
of a Finite Partial Algebra}
\date{\today}
%% \author[W.~DeMeo]{William DeMeo}
\address{University of Hawaii}
\email{williamdemeo@gmail.com}
\address{Chapman University}
\email{jipsen@chapman.edu}

%% \thanks{The authors would like to extend special thanks to...}

\maketitle

%% \begin{abstract}\end{abstract}

\section{Introduction}
\label{sec:introduction}
This notes starts 
with a proof in Section~\ref{sec:simple-proof-well} of the result stated in the title.
Bill Lampe informed us that this result has been known for a long time and 
subsequently explained to DeMeo a more general view of the result.  That view is
developed in Section~\ref{sec:more-gener-appr} below.

\section{A simple proof of a well known result}
\label{sec:simple-proof-well}
\begin{lemma}
Let $X$ be a finite set, and let $\Eq(X)$ denote the lattice of equivalence
relations on $X$. If $L\leq \Eq(X)$ is a 0-1-sublattice,
and $\rho \in \Eq(X)$ and $\rho \notin L$, then for some $k < \omega$ there exists a partial
operation $f\colon X^k \rightharpoonup X$ that is compatible with $L$ and
incompatible with $\rho$.
\end{lemma}
\begin{proof}
  First we focus on the relations in $L$ that are above $\rho$.
  Let $\rho^\uparrow \cap L = \{\gamma \in L \mid \gamma \geq \rho\}$.
  Since $\rho\notin L$, we have $\gamma > \rho$ for all $\gamma \in \rho^\uparrow \cap L$.
  Now, $\rho^\uparrow \cap L$ has a least element
  $\rho^* = \Meet (\rho^\uparrow \cap L)$.  Clearly
  $\rho^*\geq \rho$ and since $\rho^* \in L$ we have
  $\rho^*\neq \rho$, so
  $\rho^* > \rho$.  Therefore, there exists $(u,v) \in \rho^* - \rho$.

  Next consider the elements of $L$ that are not above $\rho$. For each such
  $\alpha_i \in L - \rho^\uparrow$ there exists $(x_i, y_i) \in \rho -\alpha_i$.
  Let $(x_1, y_1), \dots, (x_k, y_k)$ be the list of all unique such pairs
  (i.e., each pair appears in the list exactly once).
  Define the partial function $f\colon X^k \rightharpoonup X$ at only two points of $X^k$; specifically, let
  \[ f(x_1, \dots, x_k) = u \quad \text{ and } \quad f(y_1, \dots, y_k) = v. \]
  Then, since $(\forall i)(x_i, y_i) \in \rho$ and $(u,v) \notin \rho$, 
  $f$ is incompatible with $\rho$.  On the other hand,
  $(u,v) \in  \rho^* = \Meet (\rho^\uparrow \cap L)$, so
  $(u,v) \in \gamma$  for every $\gamma \in \rho^\uparrow \cap L$, so
  $f$ is compatible with every $\gamma \in \rho^\uparrow \cap L$.
  
  
  Finally, for each $\alpha_i\in L$ not above $\rho$ there is at least one pair
  $(x_i, y_i)\notin \alpha_i$.  Therefore, it is impossible for $f$ to be
  incompatible with any such $\alpha_i$. 
\end{proof}

\begin{theorem}
Let $X$ be a finite set and let $L\leq \Eq(X)$ be a 0-1-sublattice.
Then there exists a finite partial algebra
$\mathbb X = \< X, F\>$ with $\Con(\mathbb X) =  L$.
\end{theorem}

\begin{proof}
  By the lemma, for each $\rho \in \Eq(X) - L$, there exists $k< \omega$ and
  $f_\rho \colon  X^k \rightharpoonup X$ such that $f_\rho$ is compatible with every relation in
  $L$ and incompatible with $\rho$.  Let $\mathcal{R}$ be the set $\Eq(X) - L$ of
  all equivalence relations on $X$ that do not belong to $L$.  Define,
  $F = \{f_\rho \mid \rho \in \mathcal{R}\}$.  Evidently, $\Con \<X, F\> = L$.
\end{proof}

\section{More general view}
\label{sec:more-gener-appr}
First we recall some standard definitions.\footnote{See J. B. Nation's notes
  \cite{Nation-notes}, from which most of this section was directly lifted.}
A \defn{closure system} on a set $X$ is a collection $\sC$
of subsets of $X$ that is closed under arbitrary intersection (including the empty 
intersection, so $\bigcap \emptyset = X \in \sC$). 
Thus a closure system is a complete meet semilattice with respect to subset
inclusion ordering. 
Since every complete meet semilattice is automatically a complete lattice
(see \cite[Theorem 2.5]{Nation-notes}), 
the closed sets of a closure system form a complete lattice. 
%% The sets in $\sC$ are called \defn{closed sets}. 

For us, some key examples of closure systems are the
\begin{itemize}
\item the order ideals of an ordered set
\item the subalgebras of an algebra 
\item the equivalence relations on a set
\item the congruence relations of an algebra
\end{itemize}

A \defn{closure operator} on a set $X$ is a map $\sansC : \sP(X) \to \sP(X)$ 
satisfying, for all $A, B \in \sP(X)$,
\begin{enumerate}[(a)]
\item $A \subseteq \sansC A$ (extensivity) 
\item $A \subseteq B$ implies $\sansC A \subseteq \sansC B$ (monotonicity) 
\item $\sansC  \sansC A = \sansC A$ (idempotence) 
\end{enumerate}
A fixed point of a closure operator is called a \defn{closed set}.
The collection of closed sets of a closure operator is closed under arbitrary
intersection, 
hence forms a closure system.
Indeed, let $\sA$ be a collection of fixed points of $\sansC$. 
For each $A \in \sA$ we have $\bigcap \sA \subseteq A$, so
$\sansC(\bigcap \sA) \subseteq A$ by monotonicity.
% Therefore, $\bigcap \sA \subseteq \sansC(\bigcap \sA) \subseteq A$ for each $A \in \sA$.  
Therefore, 
$\bigcap \sA \subseteq \sansC(\bigcap \sA) \subseteq \bigcap \sA$, which proves
that $\bigcap \sA$ is a fixed point of $\sansC$. 

A closure operator $\sansC$ is called \defn{finitary} or \defn{algebraic} iff
\[
\sansC (A) = \bigcup \{\sansC(F) \mid F \subseteq A, F \text{ finite } \}.
\]

%% \appendix
%% \section{Appendix Title}
%% This is the text of the appendix, if you need one.

%\bibliographystyle{amsplain} %% or amsalpha
%% \bibliographystyle{plain-url}
\printbibliography


\end{document}
